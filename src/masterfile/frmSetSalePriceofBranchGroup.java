/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package masterfile;

import dbutility.dbUtility;
import frmlist.ListProduct;
import frmlist.listCoupon;
import java.awt.Frame;
import java.awt.event.KeyEvent;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.Locale;
import javax.swing.JOptionPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingConstants;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumnModel;
import utilititiesfunction.*;

/**
 *
 * @author s386
 */
public class frmSetSalePriceofBranchGroup extends javax.swing.JDialog {

    /**
     * Creates new form SetSalePriceofBranchGroup
     */
    DefaultTableModel tbPLU;
    DefaultTableModel tbCoupon;
    dbUtility db = new dbUtility();
    Statement stmt;
    int indexplutbl = -1;
    int indexcoupontbl = -1;
    String frmName = "setsalepriceofbranchgroup";
    ThaiUtilities cvth = new ThaiUtilities();
    DecimalFormat DoubleFmt = new DecimalFormat("##,###,##0.00");
    SimpleDateFormat dateFmtSave = new SimpleDateFormat("yyyy-MM-dd", Locale.ENGLISH);
    SimpleDateFormat dateFmtShow = new SimpleDateFormat("dd-MM-yyyy", Locale.ENGLISH);

    public frmSetSalePriceofBranchGroup(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        checkuserconfig() ;
        initable();
        db.dbconnect();
        txtfBranchName.setEditable(false);
        txtfPdesc.setEditable(false);
        txtfproname1.setEditable(false);
        txtfproname2.setEditable(false);
        txtfproname3.setEditable(false);
        getLanguage lang = new getLanguage();
        lang.setText(frmName, this, lang.getChklang());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        buttonGroup3 = new javax.swing.ButtonGroup();
        jPanel1 = new javax.swing.JPanel();
        db_lblh1 = new javax.swing.JLabel();
        txtfBgroup1 = new javax.swing.JTextField();
        txtfBranchName = new javax.swing.JTextField();
        btnsearchplu = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        db_lblh2 = new javax.swing.JLabel();
        txtfBgroup2 = new javax.swing.JTextField();
        btn2 = new javax.swing.JButton();
        txtfBgroup3 = new javax.swing.JTextField();
        btnsearchplu2 = new javax.swing.JButton();
        db_lblfrom = new javax.swing.JLabel();
        db_lblto = new javax.swing.JLabel();
        db_btnProcress = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        Tabbed1 = new javax.swing.JTabbedPane();
        jPanel4 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        txtfPcode = new javax.swing.JTextField();
        txtfPdesc = new javax.swing.JTextField();
        btnsearchplu3 = new javax.swing.JButton();
        d_lblpcode = new javax.swing.JLabel();
        db_btnOK = new javax.swing.JButton();
        db_btnCancel = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        txtfmEatIn = new javax.swing.JFormattedTextField();
        txtfmTakeAway = new javax.swing.JFormattedTextField();
        txtfmDelivery = new javax.swing.JFormattedTextField();
        txtfmPinto = new javax.swing.JFormattedTextField();
        txtfmWhole = new javax.swing.JFormattedTextField();
        d_lbleatin = new javax.swing.JLabel();
        d_lblTake = new javax.swing.JLabel();
        d_lblDelivery = new javax.swing.JLabel();
        d_lblPinto = new javax.swing.JLabel();
        d_lblWhole = new javax.swing.JLabel();
        db_lblsale = new javax.swing.JLabel();
        jPanel8 = new javax.swing.JPanel();
        txtfPro1 = new javax.swing.JTextField();
        btnsearchplu4 = new javax.swing.JButton();
        txtfproname1 = new javax.swing.JTextField();
        txtfproname2 = new javax.swing.JTextField();
        btnsearchplu5 = new javax.swing.JButton();
        txtfPro2 = new javax.swing.JTextField();
        txtfproname3 = new javax.swing.JTextField();
        btnsearchplu6 = new javax.swing.JButton();
        txtfPro3 = new javax.swing.JTextField();
        db_lblPro = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblPLU = new javax.swing.JTable();
        jPanel9 = new javax.swing.JPanel();
        db_lblCount = new javax.swing.JLabel();
        db_lblCount1 = new javax.swing.JLabel();
        db_lblCount2 = new javax.swing.JLabel();
        jPanel10 = new javax.swing.JPanel();
        db_btnDelete = new javax.swing.JButton();
        db_btnDeleteAll = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("กำหนดรหัส PLU และบัตรคูปองพิเศาของแต่ละ Branch Group");

        jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        db_lblh1.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblh1.setText("กำหนดรหัสสินค้า / โปรโมชั่นสำหรับกลุ่มสาขา (Branch Group)");
        db_lblh1.setName("db_lblh1"); // NOI18N

        txtfBgroup1.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfBgroup1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfBgroup1FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfBgroup1FocusLost(evt);
            }
        });
        txtfBgroup1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfBgroup1KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtfBgroup1KeyReleased(evt);
            }
        });

        txtfBranchName.setBackground(new java.awt.Color(255, 246, 143));
        txtfBranchName.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N

        btnsearchplu.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu.setFocusable(false);
        btnsearchplu.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchpluActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(12, 12, 12)
                        .addComponent(txtfBgroup1, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnsearchplu, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtfBranchName, javax.swing.GroupLayout.PREFERRED_SIZE, 284, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(db_lblh1))
                .addContainerGap(81, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(db_lblh1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(txtfBranchName, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(txtfBgroup1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(btnsearchplu, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(23, Short.MAX_VALUE))
        );

        jPanel2.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        db_lblh2.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblh2.setText("การ Copy ข้อมูลสำหรับกลุ่มสาขา (Branch Group)");
        db_lblh2.setName("db_lblh2"); // NOI18N

        txtfBgroup2.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfBgroup2.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfBgroup2KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtfBgroup2KeyReleased(evt);
            }
        });

        btn2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btn2.setFocusable(false);
        btn2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn2ActionPerformed(evt);
            }
        });

        txtfBgroup3.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfBgroup3.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfBgroup3KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtfBgroup3KeyReleased(evt);
            }
        });

        btnsearchplu2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu2.setFocusable(false);
        btnsearchplu2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchplu2ActionPerformed(evt);
            }
        });

        db_lblfrom.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblfrom.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        db_lblfrom.setText("จากกลุ่ม");
        db_lblfrom.setName("db_lblfrom"); // NOI18N

        db_lblto.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblto.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        db_lblto.setText("ไปยังกลุ่ม");
        db_lblto.setName("db_lblto"); // NOI18N

        db_btnProcress.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_btnProcress.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Hourglass-icon.png"))); // NOI18N
        db_btnProcress.setText("F5-ประมวลผล");
        db_btnProcress.setName("db_btnProcress"); // NOI18N
        db_btnProcress.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                db_btnProcressActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(db_lblfrom, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtfBgroup2, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btn2, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, 0)
                        .addComponent(db_lblto, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtfBgroup3, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnsearchplu2, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(db_lblh2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(db_btnProcress, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap(13, Short.MAX_VALUE)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(db_btnProcress, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(db_lblh2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtfBgroup2, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(db_lblfrom))
                    .addComponent(btn2, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(txtfBgroup3, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(db_lblto))
                    .addComponent(btnsearchplu2, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(25, 25, 25))
        );

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(""));

        Tabbed1.setBorder(null);
        Tabbed1.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        Tabbed1.setName("Tabbed1"); // NOI18N
        Tabbed1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                Tabbed1MouseClicked(evt);
            }
        });

        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(""));

        txtfPcode.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfPcode.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfPcodeFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfPcodeFocusLost(evt);
            }
        });
        txtfPcode.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfPcodeKeyPressed(evt);
            }
        });

        txtfPdesc.setBackground(new java.awt.Color(255, 246, 143));
        txtfPdesc.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N

        btnsearchplu3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu3.setFocusable(false);
        btnsearchplu3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchplu3ActionPerformed(evt);
            }
        });

        d_lblpcode.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lblpcode.setText("รหัสสินค้า (PLU Code)");
        d_lblpcode.setName("d_lblpcode"); // NOI18N

        db_btnOK.setText("OK");
        db_btnOK.setName("db_btnOK"); // NOI18N
        db_btnOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                db_btnOKActionPerformed(evt);
            }
        });

        db_btnCancel.setText("Cancel");
        db_btnCancel.setName("db_btnCancel"); // NOI18N
        db_btnCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                db_btnCancelActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(d_lblpcode, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(txtfPcode, javax.swing.GroupLayout.DEFAULT_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(btnsearchplu3, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(db_btnOK, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(db_btnCancel, javax.swing.GroupLayout.DEFAULT_SIZE, 70, Short.MAX_VALUE)))
                    .addComponent(txtfPdesc))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel7Layout.createSequentialGroup()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(db_btnOK, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(d_lblpcode)))
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(db_btnCancel, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(txtfPcode, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(btnsearchplu3, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(txtfPdesc, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(31, 31, 31))
        );

        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(""));

        txtfmEatIn.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        txtfmEatIn.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        txtfmEatIn.setText("0.00");
        txtfmEatIn.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        txtfmEatIn.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfmEatInFocusGained(evt);
            }
        });
        txtfmEatIn.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfmEatInKeyPressed(evt);
            }
        });

        txtfmTakeAway.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        txtfmTakeAway.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        txtfmTakeAway.setText("0.00");
        txtfmTakeAway.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        txtfmTakeAway.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfmTakeAwayFocusGained(evt);
            }
        });
        txtfmTakeAway.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfmTakeAwayKeyPressed(evt);
            }
        });

        txtfmDelivery.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        txtfmDelivery.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        txtfmDelivery.setText("0.00");
        txtfmDelivery.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        txtfmDelivery.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfmDeliveryFocusGained(evt);
            }
        });
        txtfmDelivery.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfmDeliveryKeyPressed(evt);
            }
        });

        txtfmPinto.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        txtfmPinto.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        txtfmPinto.setText("0.00");
        txtfmPinto.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        txtfmPinto.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfmPintoFocusGained(evt);
            }
        });
        txtfmPinto.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfmPintoKeyPressed(evt);
            }
        });

        txtfmWhole.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#,##0.00"))));
        txtfmWhole.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        txtfmWhole.setText("0.00");
        txtfmWhole.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        txtfmWhole.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfmWholeFocusGained(evt);
            }
        });
        txtfmWhole.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfmWholeKeyPressed(evt);
            }
        });

        d_lbleatin.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lbleatin.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        d_lbleatin.setText("Eat In");
        d_lbleatin.setName("d_lbleatin"); // NOI18N

        d_lblTake.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lblTake.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        d_lblTake.setText("Take Away");
        d_lblTake.setName("d_lblTake"); // NOI18N

        d_lblDelivery.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lblDelivery.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        d_lblDelivery.setText("Delivery");
        d_lblDelivery.setName("d_lblDelivery"); // NOI18N

        d_lblPinto.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lblPinto.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        d_lblPinto.setText("Pinto");
        d_lblPinto.setName("d_lblPinto"); // NOI18N

        d_lblWhole.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        d_lblWhole.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        d_lblWhole.setText("Whole Sale");
        d_lblWhole.setName("d_lblWhole"); // NOI18N

        db_lblsale.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblsale.setText("ราคาขาย");
        db_lblsale.setName("db_lblsale"); // NOI18N

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(d_lbleatin, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 75, Short.MAX_VALUE)
                    .addComponent(txtfmEatIn, javax.swing.GroupLayout.Alignment.LEADING))
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtfmTakeAway)
                    .addComponent(d_lblTake, javax.swing.GroupLayout.DEFAULT_SIZE, 75, Short.MAX_VALUE))
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtfmDelivery)
                    .addComponent(d_lblDelivery, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtfmPinto)
                    .addComponent(d_lblPinto, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtfmWhole)
                    .addComponent(d_lblWhole, javax.swing.GroupLayout.DEFAULT_SIZE, 75, Short.MAX_VALUE)))
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addComponent(db_lblsale)
                .addGap(0, 326, Short.MAX_VALUE))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                .addComponent(db_lblsale)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(d_lbleatin)
                    .addComponent(d_lblTake)
                    .addComponent(d_lblDelivery)
                    .addComponent(d_lblPinto)
                    .addComponent(d_lblWhole))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtfmEatIn, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfmWhole, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfmPinto, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfmDelivery, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfmTakeAway, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(13, Short.MAX_VALUE))
        );

        jPanel8.setBorder(javax.swing.BorderFactory.createTitledBorder(""));

        txtfPro1.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfPro1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfPro1FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfPro1FocusLost(evt);
            }
        });
        txtfPro1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfPro1KeyPressed(evt);
            }
        });

        btnsearchplu4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu4.setFocusable(false);
        btnsearchplu4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchplu4ActionPerformed(evt);
            }
        });

        txtfproname1.setBackground(new java.awt.Color(255, 246, 143));
        txtfproname1.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfproname1.setHorizontalAlignment(javax.swing.JTextField.LEFT);

        txtfproname2.setBackground(new java.awt.Color(255, 246, 143));
        txtfproname2.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfproname2.setHorizontalAlignment(javax.swing.JTextField.LEFT);

        btnsearchplu5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu5.setFocusable(false);
        btnsearchplu5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchplu5ActionPerformed(evt);
            }
        });

        txtfPro2.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfPro2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfPro2FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfPro2FocusLost(evt);
            }
        });
        txtfPro2.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfPro2KeyPressed(evt);
            }
        });

        txtfproname3.setBackground(new java.awt.Color(255, 246, 143));
        txtfproname3.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfproname3.setHorizontalAlignment(javax.swing.JTextField.LEFT);

        btnsearchplu6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/image/Windows-Magnifier-icon.png"))); // NOI18N
        btnsearchplu6.setFocusable(false);
        btnsearchplu6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsearchplu6ActionPerformed(evt);
            }
        });

        txtfPro3.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        txtfPro3.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtfPro3FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtfPro3FocusLost(evt);
            }
        });
        txtfPro3.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtfPro3KeyPressed(evt);
            }
        });

        db_lblPro.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_lblPro.setText("กำหนดรายการ Promotion");
        db_lblPro.setName("db_lblPro"); // NOI18N

        javax.swing.GroupLayout jPanel8Layout = new javax.swing.GroupLayout(jPanel8);
        jPanel8.setLayout(jPanel8Layout);
        jPanel8Layout.setHorizontalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addComponent(txtfPro1, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(btnsearchplu4, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(txtfproname1, javax.swing.GroupLayout.DEFAULT_SIZE, 175, Short.MAX_VALUE))
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addComponent(txtfPro2, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(btnsearchplu5, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(txtfproname2, javax.swing.GroupLayout.DEFAULT_SIZE, 175, Short.MAX_VALUE))
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addComponent(txtfPro3, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(btnsearchplu6, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2)
                .addComponent(txtfproname3, javax.swing.GroupLayout.DEFAULT_SIZE, 175, Short.MAX_VALUE))
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addComponent(db_lblPro)
                .addGap(0, 109, Short.MAX_VALUE))
        );
        jPanel8Layout.setVerticalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel8Layout.createSequentialGroup()
                .addComponent(db_lblPro)
                .addGap(2, 2, 2)
                .addGroup(jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtfproname1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfPro1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnsearchplu4, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, 0)
                .addGroup(jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtfproname2, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfPro2, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnsearchplu5, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, 0)
                .addGroup(jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtfproname3, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtfPro3, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnsearchplu6, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );

        tblPLU.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        tblPLU.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "PDept", "รหัสสินค้า", "ชื่อสินค้า", "Eat IN", "Take Away", "Delivery", "Pinto", "Whole Sale", "โปรโมชั่น(1)", "โปรโมชั่น(2)", "โปรโมชั่น(3)"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Object.class, java.lang.Object.class, java.lang.Object.class, java.lang.Double.class, java.lang.Double.class, java.lang.Double.class, java.lang.Double.class, java.lang.Double.class, java.lang.Object.class, java.lang.Object.class, java.lang.Object.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblPLU.setName("tblPLU"); // NOI18N
        tblPLU.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblPLUMouseClicked(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                tblPLUMouseReleased(evt);
            }
        });
        tblPLU.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                tblPLUKeyReleased(evt);
            }
        });
        jScrollPane1.setViewportView(tblPLU);
        tblPLU.getColumnModel().getColumn(0).setPreferredWidth(200);
        tblPLU.getColumnModel().getColumn(1).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(2).setPreferredWidth(500);
        tblPLU.getColumnModel().getColumn(3).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(4).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(5).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(6).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(7).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(8).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(9).setPreferredWidth(300);
        tblPLU.getColumnModel().getColumn(10).setPreferredWidth(300);

        jPanel9.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        db_lblCount.setFont(new java.awt.Font("Norasi", 1, 18)); // NOI18N
        db_lblCount.setText("0");

        db_lblCount1.setFont(new java.awt.Font("Norasi", 1, 18)); // NOI18N
        db_lblCount1.setText("จำนวนทั้งหมด");
        db_lblCount1.setName("xb_lblCount1"); // NOI18N

        db_lblCount2.setFont(new java.awt.Font("Norasi", 1, 18)); // NOI18N
        db_lblCount2.setText("รายการ");
        db_lblCount2.setName("xb_lblCount2"); // NOI18N

        javax.swing.GroupLayout jPanel9Layout = new javax.swing.GroupLayout(jPanel9);
        jPanel9.setLayout(jPanel9Layout);
        jPanel9Layout.setHorizontalGroup(
            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel9Layout.createSequentialGroup()
                .addContainerGap(675, Short.MAX_VALUE)
                .addComponent(db_lblCount1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(db_lblCount)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(db_lblCount2)
                .addGap(89, 89, 89))
        );
        jPanel9Layout.setVerticalGroup(
            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(db_lblCount)
                .addComponent(db_lblCount1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(db_lblCount2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel10.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        db_btnDelete.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_btnDelete.setText("ลบเฉพาะรายการที่เลือก");
        db_btnDelete.setName("db_btnDelete"); // NOI18N
        db_btnDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                db_btnDeleteActionPerformed(evt);
            }
        });

        db_btnDeleteAll.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        db_btnDeleteAll.setText("ลบทุกรายการ");
        db_btnDeleteAll.setName("db_btnDeleteAll"); // NOI18N
        db_btnDeleteAll.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                db_btnDeleteAllActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel10Layout = new javax.swing.GroupLayout(jPanel10);
        jPanel10.setLayout(jPanel10Layout);
        jPanel10Layout.setHorizontalGroup(
            jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel10Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(db_btnDelete, javax.swing.GroupLayout.PREFERRED_SIZE, 161, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(db_btnDeleteAll, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        jPanel10Layout.setVerticalGroup(
            jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(db_btnDelete, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                .addComponent(db_btnDeleteAll, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(2, 2, 2)
                        .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(3, 3, 3)
                        .addComponent(jPanel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 942, Short.MAX_VALUE)
                    .addComponent(jPanel9, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jPanel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, 0, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 283, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0)
                .addComponent(jPanel9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0)
                .addComponent(jPanel10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 20, Short.MAX_VALUE))
        );

        Tabbed1.addTab("(การกำหนดรหัสสินค้า / โปรโมชั่น)", jPanel4);

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Tabbed1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addComponent(Tabbed1, javax.swing.GroupLayout.PREFERRED_SIZE, 567, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 45, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-1024)/2, (screenSize.height-768)/2, 1024, 768);
    }// </editor-fold>//GEN-END:initComponents
private void checkuserconfig() {
        //MenuName = Mast1
        UserLogin userrec = UserLogin.userlogin;
        if (userrec.getPlu4().equals("1")) {
            db_btnOK.setEnabled(false);
            db_btnProcress.setEnabled(false);
            db_btnDelete.setEnabled(false);
            db_btnDeleteAll.setEnabled(false);
        }
        if (userrec.getPlu4().equals("2")) {
            db_btnOK.setEnabled(true);
            db_btnProcress.setEnabled(true);
            db_btnDelete.setEnabled(false);
            db_btnDeleteAll.setEnabled(false);
        }
        if (userrec.getPlu4().equals("3")) {
            db_btnOK.setEnabled(true);
            db_btnProcress.setEnabled(true);
            db_btnDelete.setEnabled(true);
            db_btnDeleteAll.setEnabled(true);
        }
    }
    private void btnsearchpluActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchpluActionPerformed

        btnSearchBgroupSettext(1);
        showbgtxtname(txtfBgroup1.getText());
        showdataIntbl(txtfBgroup1.getText());

    }//GEN-LAST:event_btnsearchpluActionPerformed

    private void btn2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn2ActionPerformed
        btnSearchBgroupSettext(2);
        // TODO add your handling code here:
    }//GEN-LAST:event_btn2ActionPerformed

    private void btnsearchplu2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchplu2ActionPerformed
        btnSearchBgroupSettext(3);
        // TODO add your handling code here:
    }//GEN-LAST:event_btnsearchplu2ActionPerformed

    private void btnsearchplu3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchplu3ActionPerformed

        if (!txtfBgroup1.getText().equals("") && !txtfBranchName.getText().equals("")) {
            btnSearchProduct();
            if (showplu()) {
                txtfmEatIn.requestFocus();
            }
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_btnsearchplu3ActionPerformed

    private void btnsearchplu4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchplu4ActionPerformed
        if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
            btnSearchPromotionSettext(1);
        }

        // TODO add your handling code here:
    }//GEN-LAST:event_btnsearchplu4ActionPerformed

    private void btnsearchplu5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchplu5ActionPerformed
        if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
            btnSearchPromotionSettext(2);
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_btnsearchplu5ActionPerformed

    private void btnsearchplu6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsearchplu6ActionPerformed
        if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
            btnSearchPromotionSettext(3);
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_btnsearchplu6ActionPerformed

    private void txtfBgroup1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup1KeyPressed

        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfBgroup1.setText("");
            txtfBgroup1.requestFocus();
            showdataIntbl(txtfBgroup1.getText());

        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            showbgtxtname(txtfBgroup1.getText());
            showdataIntbl(txtfBgroup1.getText());
        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchBgroupSettext(1);
            showbgtxtname(txtfBgroup1.getText());
            showdataIntbl(txtfBgroup1.getText());
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup1KeyPressed

    private void tblPLUMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblPLUMouseReleased
        if (evt.getClickCount() == 2) {
            int rowSelect = tblPLU.getSelectedRow();
            String pcode = tblPLU.getValueAt(rowSelect, 1).toString();
            String pname = tblPLU.getValueAt(rowSelect, 2).toString();
            Double eatin = Double.parseDouble(tblPLU.getValueAt(rowSelect, 3).toString());
            Double takeaway = Double.parseDouble(tblPLU.getValueAt(rowSelect, 4).toString());
            Double delivery = Double.parseDouble(tblPLU.getValueAt(rowSelect, 5).toString());
            Double pinto = Double.parseDouble(tblPLU.getValueAt(rowSelect, 6).toString());
            Double whole = Double.parseDouble(tblPLU.getValueAt(rowSelect, 7).toString());
            String pro1 = tblPLU.getValueAt(rowSelect, 8).toString();
            String pro2 = tblPLU.getValueAt(rowSelect, 9).toString();
            String pro3 = tblPLU.getValueAt(rowSelect, 10).toString();
            txtfPcode.setText(pcode);
            txtfPdesc.setText(pname);

            txtfmEatIn.setText(DoubleFmt.format(eatin));
            txtfmTakeAway.setText(DoubleFmt.format(takeaway));
            txtfmDelivery.setText(DoubleFmt.format(delivery));
            txtfmPinto.setText(DoubleFmt.format(pinto));
            txtfmWhole.setText(DoubleFmt.format(whole));
            txtfPro1.setText(pro1);
            txtfPro2.setText(pro2);
            txtfPro3.setText(pro3);
            settxtproname();



        }
        // TODO add your handling code here:
    }//GEN-LAST:event_tblPLUMouseReleased

    private void txtfPcodeFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPcodeFocusGained
        txtfPcode.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPcodeFocusGained

    private void txtfmTakeAwayFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfmTakeAwayFocusGained
        txtfmTakeAway.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmTakeAwayFocusGained

    private void txtfmDeliveryFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfmDeliveryFocusGained
        txtfmDelivery.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmDeliveryFocusGained

    private void txtfmPintoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfmPintoFocusGained
        txtfmPinto.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmPintoFocusGained

    private void txtfmWholeFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfmWholeFocusGained
        txtfmWhole.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmWholeFocusGained

    private void txtfPro1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro1FocusGained
        txtfPro1.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro1FocusGained

    private void txtfPro2FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro2FocusGained
        txtfPro2.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro2FocusGained

    private void txtfPro3FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro3FocusGained
        txtfPro3.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro3FocusGained

    private void txtfPcodeKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfPcodeKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            clearplutxt();
        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfmEatIn.requestFocus();

        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {

            if (!txtfBgroup1.getText().equals("") && !txtfBranchName.getText().equals("")) {
                btnSearchProduct();
                if (showplu()) {
                    txtfmEatIn.requestFocus();
                }
            }

        }

        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPcodeKeyPressed

    private void txtfmEatInKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfmEatInKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            txtfmTakeAway.requestFocus();
        }

        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmEatInKeyPressed

    private void txtfmTakeAwayKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfmTakeAwayKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfmDelivery.requestFocus();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmTakeAwayKeyPressed

    private void txtfmDeliveryKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfmDeliveryKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfmPinto.requestFocus();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmDeliveryKeyPressed

    private void txtfmPintoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfmPintoKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfmWhole.requestFocus();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmPintoKeyPressed

    private void txtfmWholeKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfmWholeKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfPro1.requestFocus();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfmWholeKeyPressed

    private void txtfPro1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfPro1KeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfPro1.setText("");
            txtfPro1.requestFocus();
        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
                if (EnterPromotion(1)) {
                    txtfPro2.requestFocus();
                }
            } else {
                txtfPro2.requestFocus();
            }

        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchPromotionSettext(1);

        }

        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro1KeyPressed

    private void txtfPro2KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfPro2KeyPressed

        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfPro2.setText("");
            txtfPro2.requestFocus();
        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
                if (EnterPromotion(2)) {
                    txtfPro3.requestFocus();
                }
            } else {
                txtfPro3.requestFocus();
            }


        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchPromotionSettext(2);

        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro2KeyPressed

    private void txtfPro3KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfPro3KeyPressed

        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfPro3.setText("");
            txtfPro3.requestFocus();
        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (!txtfBgroup1.getText().equals("") && !txtfPcode.getText().equals("") && !txtfBranchName.getText().equals("") && !txtfPdesc.getText().equals("")) {
                if (EnterPromotion(3)) {

                    db_btnOK.requestFocus();
                }
            } else {

                db_btnOK.requestFocus();
            }

        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchPromotionSettext(3);

        }

        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro3KeyPressed

    private void txtfmEatInFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfmEatInFocusGained


        txtfmEatIn.selectAll();
    }//GEN-LAST:event_txtfmEatInFocusGained

    private void txtfPcodeFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPcodeFocusLost
        if (!txtfPcode.getText().equals("")) {
            if (!txtfBgroup1.getText().equals("") && !txtfBranchName.getText().equals("")) {
                if (showplu()) {
                    txtfmEatIn.requestFocus();
                }
            }
        }

        //showplu();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPcodeFocusLost

    private void txtfBgroup1FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfBgroup1FocusLost
        if (txtfBgroup1.getText().equals("") && !chkbgroup(txtfBgroup1.getText())) {
            txtfBranchName.setText("");
            showdataIntbl(txtfBgroup1.getText());
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup1FocusLost

    private void txtfPro1FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro1FocusLost
        if (txtfPro1.getText().equals("")) {
            txtfproname1.setText("");
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro1FocusLost

    private void txtfPro2FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro2FocusLost
        if (txtfPro2.getText().equals("")) {
            txtfproname2.setText("");
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro2FocusLost

    private void txtfPro3FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfPro3FocusLost
        if (txtfPro3.getText().equals("")) {
            txtfproname3.setText("");
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfPro3FocusLost

    private void tblPLUMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblPLUMouseClicked
        indexplutbl = tblPLU.getSelectedRow();

        // TODO add your handling code here:
    }//GEN-LAST:event_tblPLUMouseClicked

    private void tblPLUKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_tblPLUKeyReleased
        indexplutbl = tblPLU.getSelectedRow();

        // TODO add your handling code here:
    }//GEN-LAST:event_tblPLUKeyReleased

    private void db_btnDeleteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_db_btnDeleteActionPerformed
        delete();
        // TODO add your handling code here:
    }//GEN-LAST:event_db_btnDeleteActionPerformed

    private void db_btnCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_db_btnCancelActionPerformed
        clearplutxt();
        txtfPcode.requestFocus();
        // TODO add your handling code here:
    }//GEN-LAST:event_db_btnCancelActionPerformed

    private void db_btnDeleteAllActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_db_btnDeleteAllActionPerformed
        deleteall();
        // TODO add your handling code here:
    }//GEN-LAST:event_db_btnDeleteAllActionPerformed

    private void db_btnProcressActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_db_btnProcressActionPerformed
        copyProcress();

    }//GEN-LAST:event_db_btnProcressActionPerformed

    private void txtfBgroup1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtfBgroup1FocusGained
        txtfBgroup1.selectAll();
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup1FocusGained

    private void Tabbed1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_Tabbed1MouseClicked


        if (Tabbed1.isEnabledAt(1) == true) {
            if (!txtfBgroup1.getText().equals("")) {
                //txtfcucode.requestFocus();
            } else {
                txtfBgroup1.requestFocus();
            }
        } else if (Tabbed1.isEnabledAt(0) == true) {
            if (!txtfBgroup1.getText().equals("")) {
                txtfPcode.requestFocus();
            } else {

                txtfBgroup1.requestFocus();
            }

        }

        // TODO add your handling code here:
    }//GEN-LAST:event_Tabbed1MouseClicked

    private void db_btnOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_db_btnOKActionPerformed
        if (!txtfBranchName.getText().equals("")) {
            if (save()) {
                txtfPcode.requestFocus();
            } else {
            }
        } else {
            JOptionPane.showMessageDialog(this, "กลุ่มสาขาไม่ถูกต้องกรุณาเลือกกลุ่มสาขาก่อน");
            txtfBgroup1.setText("");
            txtfBgroup1.requestFocus();
        }

        // TODO add your handling code here:
    }//GEN-LAST:event_db_btnOKActionPerformed

    private void txtfBgroup2KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup2KeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfBgroup2.setText("");


        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
            copyProcress();

        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            txtfBgroup3.requestFocus();
        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchBgroupSettext(2);
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup2KeyPressed

    private void txtfBgroup3KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup3KeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
            txtfBgroup3.setText("");

        } else if (evt.getKeyCode() == KeyEvent.VK_F5) {
            copyProcress();

        } else if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            db_btnProcress.requestFocus();
        } else if (evt.getKeyCode() == KeyEvent.VK_F1) {
            btnSearchBgroupSettext(3);
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup3KeyPressed

    private void txtfBgroup1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup1KeyReleased
        String get = txtfBgroup1.getText();
        String out = get.toUpperCase();
        txtfBgroup1.setText(out);
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup1KeyReleased

    private void txtfBgroup2KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup2KeyReleased
        String get = txtfBgroup2.getText();
        String out = get.toUpperCase();
        txtfBgroup2.setText(out);
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup2KeyReleased

    private void txtfBgroup3KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtfBgroup3KeyReleased
        String get = txtfBgroup3.getText();
        String out = get.toUpperCase();
        txtfBgroup3.setText(out);
        // TODO add your handling code here:
    }//GEN-LAST:event_txtfBgroup3KeyReleased

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(frmSetSalePriceofBranchGroup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(frmSetSalePriceofBranchGroup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(frmSetSalePriceofBranchGroup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(frmSetSalePriceofBranchGroup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the dialog
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                frmSetSalePriceofBranchGroup dialog = new frmSetSalePriceofBranchGroup(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {

                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTabbedPane Tabbed1;
    private javax.swing.JButton btn2;
    private javax.swing.JButton btnsearchplu;
    private javax.swing.JButton btnsearchplu2;
    private javax.swing.JButton btnsearchplu3;
    private javax.swing.JButton btnsearchplu4;
    private javax.swing.JButton btnsearchplu5;
    private javax.swing.JButton btnsearchplu6;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.ButtonGroup buttonGroup3;
    private javax.swing.JLabel d_lblDelivery;
    private javax.swing.JLabel d_lblPinto;
    private javax.swing.JLabel d_lblTake;
    private javax.swing.JLabel d_lblWhole;
    private javax.swing.JLabel d_lbleatin;
    private javax.swing.JLabel d_lblpcode;
    private javax.swing.JButton db_btnCancel;
    private javax.swing.JButton db_btnDelete;
    private javax.swing.JButton db_btnDeleteAll;
    private javax.swing.JButton db_btnOK;
    private javax.swing.JButton db_btnProcress;
    private javax.swing.JLabel db_lblCount;
    private javax.swing.JLabel db_lblCount1;
    private javax.swing.JLabel db_lblCount2;
    private javax.swing.JLabel db_lblPro;
    private javax.swing.JLabel db_lblfrom;
    private javax.swing.JLabel db_lblh1;
    private javax.swing.JLabel db_lblh2;
    private javax.swing.JLabel db_lblsale;
    private javax.swing.JLabel db_lblto;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel10;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tblPLU;
    private javax.swing.JTextField txtfBgroup1;
    private javax.swing.JTextField txtfBgroup2;
    private javax.swing.JTextField txtfBgroup3;
    private javax.swing.JTextField txtfBranchName;
    private javax.swing.JTextField txtfPcode;
    private javax.swing.JTextField txtfPdesc;
    private javax.swing.JTextField txtfPro1;
    private javax.swing.JTextField txtfPro2;
    private javax.swing.JTextField txtfPro3;
    private javax.swing.JFormattedTextField txtfmDelivery;
    private javax.swing.JFormattedTextField txtfmEatIn;
    private javax.swing.JFormattedTextField txtfmPinto;
    private javax.swing.JFormattedTextField txtfmTakeAway;
    private javax.swing.JFormattedTextField txtfmWhole;
    private javax.swing.JTextField txtfproname1;
    private javax.swing.JTextField txtfproname2;
    private javax.swing.JTextField txtfproname3;
    // End of variables declaration//GEN-END:variables
    public void btnSearchBgroupSettext(int txtfno) {
        listBranchGroup f = new listBranchGroup(new NimbusFrame(), true);
        f.setVisible(true);
        if (!f.bcode.equals("")) {
            if (txtfno == 1) {
                txtfBgroup1.setText(f.bcode);
            } else if (txtfno == 2) {
                txtfBgroup2.setText(f.bcode);
                txtfBgroup2.requestFocus();
            } else if (txtfno == 3) {
                txtfBgroup3.setText(f.bcode);
                txtfBgroup3.requestFocus();
            }

        }
    }

    public void btnSearchPromotionSettext(int txtfno) {
        listPromotion f = new listPromotion(new NimbusFrame(), true);
        f.setVisible(true);
        if (!f.bcode.equals("")) {
            if (txtfno == 1) {
                txtfPro1.setText(f.bcode);
                if (!getpromotionname(txtfPro1.getText()).equals("Null") && !getpromotionname(txtfPro1.getText()).equals("")) {
                    txtfproname1.setText(getpromotionname(txtfPro1.getText()));
                    txtfPro1.requestFocus();
                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro1.requestFocus();
                }

            } else if (txtfno == 2) {
                txtfPro2.setText(f.bcode);
                if (!getpromotionname(txtfPro2.getText()).equals("Null") && !getpromotionname(txtfPro2.getText()).equals("")) {
                    txtfproname2.setText(getpromotionname(txtfPro2.getText()));
                    txtfPro2.requestFocus();
                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro2.requestFocus();
                }

            } else if (txtfno == 3) {
                txtfPro3.setText(f.bcode);
                if (!getpromotionname(txtfPro3.getText()).equals("Null") && !getpromotionname(txtfPro3.getText()).equals("")) {
                    txtfproname3.setText(getpromotionname(txtfPro3.getText()));
                    txtfPro3.requestFocus();
                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro3.requestFocus();
                }
            }

        }
    }

    public boolean EnterPromotion(int txtfno) {
        boolean chk = true;

        if (txtfno == 1) {
            if (!txtfPro1.getText().equals("")) {
                if (!getpromotionname(txtfPro1.getText()).equals("Null")) {

                    txtfproname1.setText(getpromotionname(txtfPro1.getText()));
                    chk = true;
                } else if (getpromotionname(txtfPro1.getText()).equals("Null")) {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro1.requestFocus();
                    txtfproname1.setText("");
                    chk = false;
                }
            }
        } else if (txtfno == 2) {
            if (!txtfPro2.getText().equals("")) {
                if (!getpromotionname(txtfPro2.getText()).equals("Null")) {
                    txtfproname2.setText(getpromotionname(txtfPro2.getText()));
                    chk = true;
                } else if (getpromotionname(txtfPro2.getText()).equals("Null")) {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro2.requestFocus();
                    txtfproname2.setText("");
                    chk = false;
                }
            }
        } else if (txtfno == 3) {
            if (!txtfPro3.getText().equals("")) {
                if (!getpromotionname(txtfPro3.getText()).equals("Null")) {
                    txtfproname3.setText(getpromotionname(txtfPro3.getText()));
                    chk = true;
                } else if (getpromotionname(txtfPro3.getText()).equals("Null")) {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง");
                    txtfPro3.requestFocus();
                    txtfproname3.setText("");
                    chk = false;
                }
            }
        }


        return chk;
    }

    public void showbgtxtname(String code) {
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from branchgroup where bgroupcode ='" + cvth.Unicode2ASCII(code) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    txtfBranchName.setText(cvth.ASCII2Unicode(rs.getString("bgroupname")));
                    if (Tabbed1.getSelectedIndex() == 0) {
                        txtfPcode.requestFocus();
                    } else {
                        //txtfcucode.requestFocus();
                    }

                    clearplutxt();
                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง");
                    txtfBranchName.setText("");
                    clearplutxt();
                    txtfBgroup1.requestFocus();
                }
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from branchgroup where bgroupcode ='" + code + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    txtfBranchName.setText(rs.getString("bgroupname"));

                    if (Tabbed1.getSelectedIndex() == 0) {
                        txtfPcode.requestFocus();
                    } else {
                        //txtfcucode.requestFocus();
                    }
                    clearplutxt();
                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง");
                    txtfBranchName.setText("");
                    txtfBgroup1.requestFocus();

                }
            }
        } catch (Exception e) {
        }
    }

    public boolean chkbgroup(String code) {
        boolean chk = false;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from branchgroup where bgroupcode ='" + cvth.Unicode2ASCII(code) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                } else {
                    chk = false;
                }
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from branchgroup where bgroupcode ='" + code + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                } else {
                    chk = false;
                }
            }
        } catch (Exception e) {
        }
        return chk;
    }

    private void initable() {
        tbPLU = (DefaultTableModel) tblPLU.getModel();
        tblPLU.setShowGrid(true);
        //tblPLU.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        tblPLU.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        tblPLU.setRowSelectionAllowed(true);
        tblPLU.setBackground(java.awt.Color.WHITE);
        tblPLU.setGridColor(java.awt.Color.gray);
        JTableHeader header = tblPLU.getTableHeader();
        header.setFont(new java.awt.Font("Norasi", java.awt.Font.BOLD, 14));
        //tblBtype.setFont(new java.awt.Font("Norasi", java.awt.Font.BOLD, 14));
        tblPLU.setRowHeight(25);
        tblPLU.setAutoCreateRowSorter(true);
        TableTestFormatRenderer t;
        t = new TableTestFormatRenderer(DoubleFmt);
        t.setHorizontalAlignment(SwingConstants.RIGHT);
        DefaultTableCellRenderer r;
        r = new DefaultTableCellRenderer();
        r.setHorizontalAlignment(SwingConstants.RIGHT);
        DefaultTableCellRenderer c;
        c = new DefaultTableCellRenderer();
        c.setHorizontalAlignment(SwingConstants.CENTER);
        DefaultTableCellRenderer l;
        l = new DefaultTableCellRenderer();
        l.setHorizontalAlignment(SwingConstants.LEFT);

        TableColumnModel tcm = tblPLU.getColumnModel();
        tcm.getColumn(0).setCellRenderer(l);
        tcm.getColumn(1).setCellRenderer(l);
        tcm.getColumn(2).setCellRenderer(l);
        tcm.getColumn(3).setCellRenderer(t);
        tcm.getColumn(4).setCellRenderer(t);
        tcm.getColumn(5).setCellRenderer(t);
        tcm.getColumn(6).setCellRenderer(t);
        tcm.getColumn(7).setCellRenderer(t);
        tcm.getColumn(8).setCellRenderer(l);
        tcm.getColumn(9).setCellRenderer(l);
        tcm.getColumn(10).setCellRenderer(l);
     
    }

    private void showdataIntbl(String code) {
        ResultSet rs = null;
        int count = 0;
        tbPLU = (DefaultTableModel) tblPLU.getModel();
        int cnt = tbPLU.getRowCount();
        if (cnt > 0) {
            for (int i = 0; i < cnt; i++) {
                tbPLU.removeRow(0);
            }
        }
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from blink inner join product on blink.pcode = product.pcode where blink.bgroup ='" + cvth.Unicode2ASCII(code) + "' order by pdept,blink.pcode";
                rs = stmt.executeQuery(sql);
                while (rs.next()) {
                    tbPLU.addRow(new Object[]{cvth.ASCII2Unicode(rs.getString("pdept")),
                                cvth.ASCII2Unicode(rs.getString("pcode")),
                                cvth.ASCII2Unicode(rs.getString("pdesc")),
                                rs.getDouble("price1"),
                                rs.getDouble("price2"),
                                rs.getDouble("price3"),
                                rs.getDouble("price4"),
                                rs.getDouble("price5"),
                                cvth.ASCII2Unicode(rs.getString("promotion1")),
                                cvth.ASCII2Unicode(rs.getString("promotion2")),
                                cvth.ASCII2Unicode(rs.getString("promotion3"))
                            });
                    count++;
                }

            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from blink inner join product on blink.pcode = product.pcode where blink.bgroup ='" + code + "' order by pdept,blink.pcode";
                rs = stmt.executeQuery(sql);
                while (rs.next()) {
                    tbPLU.addRow(new Object[]{rs.getString("pdept"),
                                rs.getString("pcode"),
                                rs.getString("pdesc"),
                                rs.getDouble("price1"),
                                rs.getDouble("price2"),
                                rs.getDouble("price3"),
                                rs.getDouble("price4"),
                                rs.getDouble("price5"),
                                rs.getString("promotion1"),
                                rs.getString("promotion2"),
                                rs.getString("promotion3")
                            });
                    count++;
                }

            }
            db_lblCount.setText(count + "");
        } catch (Exception e) {
        }

    }

    public boolean chkplu(String code, String bgroupcode) {
        boolean chk = false;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from blink where pcode ='" + cvth.Unicode2ASCII(code) + "' and bgroup='" + cvth.Unicode2ASCII(bgroupcode) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                }

            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from blink where pcode ='" + code + "' and bgroup='" + bgroupcode + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;

                }

            }
        } catch (Exception e) {
        }
        return chk;
    }

    public boolean chkcou(String code, String bgroupcode) {
        boolean chk = false;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from culink where cucode ='" + cvth.Unicode2ASCII(code) + "' and bgroup='" + cvth.Unicode2ASCII(bgroupcode) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                }

            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from culink where cucode ='" + code + "' and bgroup='" + bgroupcode + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;

                }

            }
        } catch (Exception e) {
        }
        return chk;
    }

    public boolean showplu() {
        boolean chk = false;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                if (chkplu(txtfPcode.getText(), txtfBgroup1.getText())) {
                    String sql = "select * from blink inner join product on blink.pcode = product.pcode where blink.pcode ='" + cvth.Unicode2ASCII(txtfPcode.getText()) + "' and bgroup='" + cvth.Unicode2ASCII(txtfBgroup1.getText()) + "'";
                    rs = stmt.executeQuery(sql);
                    if (rs.next()) {
                        txtfPcode.setText(cvth.ASCII2Unicode(rs.getString("pcode")));
                        txtfPdesc.setText(cvth.ASCII2Unicode(rs.getString("pdesc")));
                        txtfmEatIn.setText(DoubleFmt.format(rs.getDouble("price1")));
                        txtfmTakeAway.setText(DoubleFmt.format(rs.getDouble("price2")));
                        txtfmDelivery.setText(DoubleFmt.format(rs.getDouble("price3")));
                        txtfmPinto.setText(DoubleFmt.format(rs.getDouble("price4")));
                        txtfmWhole.setText(DoubleFmt.format(rs.getDouble("price5")));
                        txtfPro1.setText(cvth.ASCII2Unicode(rs.getString("promotion1")));
                        txtfPro2.setText(cvth.ASCII2Unicode(rs.getString("promotion2")));
                        txtfPro3.setText(cvth.ASCII2Unicode(rs.getString("promotion3")));
                        chk = true;
                    }
                } else {
                    String sql = "select * from product  where pcode ='" + cvth.Unicode2ASCII(txtfPcode.getText()) + "'";
                    rs = stmt.executeQuery(sql);
                    if (rs.next()) {
                        txtfPcode.setText(cvth.ASCII2Unicode(rs.getString("pcode")));
                        txtfPdesc.setText(cvth.ASCII2Unicode(rs.getString("pdesc")));
                        txtfmEatIn.setText(DoubleFmt.format(rs.getDouble("pprice11")));
                        txtfmTakeAway.setText(DoubleFmt.format(rs.getDouble("pprice12")));
                        txtfmDelivery.setText(DoubleFmt.format(rs.getDouble("pprice13")));
                        txtfmPinto.setText(DoubleFmt.format(rs.getDouble("pprice14")));
                        txtfmWhole.setText(DoubleFmt.format(rs.getDouble("pprice15")));
                        txtfPro1.setText(cvth.ASCII2Unicode(rs.getString("ppromotion1")));
                        txtfPro2.setText(cvth.ASCII2Unicode(rs.getString("ppromotion2")));
                        txtfPro3.setText(cvth.ASCII2Unicode(rs.getString("ppromotion3")));
                        chk = true;
                    } else {
                        JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าไม่ถูกต้อง");
                        txtfPcode.requestFocus();
                        clearplutxt();
                        return false;
                    }
                }
                settxtproname();

            } else {
                stmt = (Statement) db.con.createStatement();
                if (chkplu(txtfPcode.getText(), txtfBgroup1.getText())) {
                    String sql = "select * from blink inner join product on blink.pcode = product.pcode where blink.pcode ='" + txtfPcode.getText() + "' and bgroup='" + txtfBgroup1.getText() + "'";
                    rs = stmt.executeQuery(sql);
                    if (rs.next()) {
                        txtfPcode.setText(rs.getString("pcode"));
                        txtfPdesc.setText(rs.getString("pdesc"));
                        txtfmEatIn.setText(DoubleFmt.format(rs.getDouble("price1")));
                        txtfmTakeAway.setText(DoubleFmt.format(rs.getDouble("price2")));
                        txtfmDelivery.setText(DoubleFmt.format(rs.getDouble("price3")));
                        txtfmPinto.setText(DoubleFmt.format(rs.getDouble("price4")));
                        txtfmWhole.setText(DoubleFmt.format(rs.getDouble("price5")));
                        txtfPro1.setText(rs.getString("promotion1"));
                        txtfPro2.setText(rs.getString("promotion2"));
                        txtfPro3.setText(rs.getString("promotion3"));
                        chk = true;
                    }
                } else {
                    String sql = "select * from product  where pcode ='" + txtfPcode.getText() + "'";
                    rs = stmt.executeQuery(sql);
                    if (rs.next()) {
                        txtfPcode.setText(rs.getString("pcode"));
                        txtfPdesc.setText(rs.getString("pdesc"));
                        txtfmEatIn.setText(DoubleFmt.format(rs.getDouble("pprice11")));
                        txtfmTakeAway.setText(DoubleFmt.format(rs.getDouble("pprice12")));
                        txtfmDelivery.setText(DoubleFmt.format(rs.getDouble("pprice13")));
                        txtfmPinto.setText(DoubleFmt.format(rs.getDouble("pprice14")));
                        txtfmWhole.setText(DoubleFmt.format(rs.getDouble("pprice15")));
                        txtfPro1.setText(rs.getString("ppromotion1"));
                        txtfPro2.setText(rs.getString("ppromotion2"));
                        txtfPro3.setText(rs.getString("ppromotion3"));
                        chk = true;
                    } else {
                        JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าไม่ถูกต้อง");
                        txtfPcode.requestFocus();
                        clearplutxt();
                        return false;
                    }
                }
                settxtproname();

            }
        } catch (Exception e) {
        }

        return chk;

    }

    public void clearplutxt() {
        txtfPcode.setText("");
        txtfPdesc.setText("");
        txtfmEatIn.setText("0.00");
        txtfmTakeAway.setText("0.00");
        txtfmDelivery.setText("0.00");
        txtfmPinto.setText("0.00");
        txtfmWhole.setText("0.00");
        txtfPro1.setText("");
        txtfPro2.setText("");
        txtfPro3.setText("");
        txtfproname1.setText("");
        txtfproname2.setText("");
        txtfproname3.setText("");
        indexplutbl = -1;
    }

    public String getpromotionname(String code) {
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from protab where procode ='" + cvth.Unicode2ASCII(code) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    return cvth.ASCII2Unicode(rs.getString("prodesc"));
                } else {
                    return "Null";
                }
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from protab where procode ='" + code + "";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    return rs.getString("prodesc");

                } else {
                    return "Null";
                }

            }
        } catch (Exception e) {
        }
        return "";
    }

    public void settxtproname() {
        txtfproname1.setText("");
        txtfproname2.setText("");
        txtfproname3.setText("");
        if (!txtfPro1.getText().equals("")) {
            txtfproname1.setText(getpromotionname(txtfPro1.getText()));
        }
        if (!txtfPro2.getText().equals("")) {
            txtfproname2.setText(getpromotionname(txtfPro2.getText()));
        }
        if (!txtfPro3.getText().equals("")) {
            txtfproname3.setText(getpromotionname(txtfPro3.getText()));
        }
    }

    public boolean save() {
        boolean chk = false;
        if (validateSave()) {
            if (chkplu(txtfPcode.getText(), txtfBgroup1.getText())) {

                try {
                    if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                        stmt = (Statement) db.con.createStatement();
                        String sql = "Update blink set price1=?,price2 = ?,price3 = ?,price4 = ?,price5 = ?,promotion1 = ?,promotion2 = ?,promotion3 = ?,lastup = ? where pcode = ? and bgroup = ?";
                        PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                        prm.setDouble(1, Double.parseDouble(PUtility.ConvertReal(txtfmEatIn.getText())));
                        prm.setDouble(2, Double.parseDouble(PUtility.ConvertReal(txtfmTakeAway.getText())));
                        prm.setDouble(3, Double.parseDouble(PUtility.ConvertReal(txtfmDelivery.getText())));
                        prm.setDouble(4, Double.parseDouble(PUtility.ConvertReal(txtfmPinto.getText())));
                        prm.setDouble(5, Double.parseDouble(PUtility.ConvertReal(txtfmWhole.getText())));
                        prm.setString(6, cvth.Unicode2ASCII(txtfPro1.getText()));
                        prm.setString(7, cvth.Unicode2ASCII(txtfPro2.getText()));
                        prm.setString(8, cvth.Unicode2ASCII(txtfPro3.getText()));
                        prm.setString(9, cvth.Unicode2ASCII(dateFmtSave.format(new java.util.Date())));
                        prm.setString(10, cvth.Unicode2ASCII(txtfPcode.getText()));
                        prm.setString(11, cvth.Unicode2ASCII(txtfBgroup1.getText()));
                        prm.executeUpdate();
                        chk = true;
                    } else {
                        stmt = (Statement) db.con.createStatement();
                        String sql = "Update blink set price1=?,price2 = ?,price3 = ?,price4 = ?,price5 = ?,promotion1 = ?,promotion2 = ?,promotion3 = ?,lastup = ? where pcode = ? and bgroup = ?";
                        PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                        prm.setDouble(1, Double.parseDouble(PUtility.ConvertReal(txtfmEatIn.getText())));
                        prm.setDouble(2, Double.parseDouble(PUtility.ConvertReal(txtfmTakeAway.getText())));
                        prm.setDouble(3, Double.parseDouble(PUtility.ConvertReal(txtfmDelivery.getText())));
                        prm.setDouble(4, Double.parseDouble(PUtility.ConvertReal(txtfmPinto.getText())));
                        prm.setDouble(5, Double.parseDouble(PUtility.ConvertReal(txtfmWhole.getText())));
                        prm.setString(6, txtfPro1.getText());
                        prm.setString(7, txtfPro2.getText());
                        prm.setString(8, txtfPro3.getText());
                        prm.setString(9, dateFmtSave.format(new java.util.Date()));
                        prm.setString(10, txtfPcode.getText());
                        prm.setString(11, txtfBgroup1.getText());
                        prm.executeUpdate();
                        chk = true;

                    }
                    stmt.close();
                    clearplutxt();

                } catch (Exception e) {
                    JOptionPane.showMessageDialog(this, e.getMessage(), "Update Error", JOptionPane.ERROR_MESSAGE);
                }
            } else {
                try {
                    if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                        stmt = (Statement) db.con.createStatement();
                        String sql = "Insert into blink (pdept,pcode,lastup,flage,bgroup,price1,price2,price3,price4,price5,promotion1,promotion2,promotion3) values(?,?,?,?,?,?,?,?,?,?,?,?,?)";
                        PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                        String[] pdept = getpdepand();
                        prm.setString(1, pdept[0]);
                        prm.setString(2, cvth.Unicode2ASCII(txtfPcode.getText()));
                        prm.setString(3, cvth.Unicode2ASCII(dateFmtSave.format(new java.util.Date())));
                        prm.setString(4, "Y");
                        prm.setString(5, cvth.Unicode2ASCII(txtfBgroup1.getText()));
                        prm.setDouble(6, Double.parseDouble(PUtility.ConvertReal(txtfmEatIn.getText())));
                        prm.setDouble(7, Double.parseDouble(PUtility.ConvertReal(txtfmTakeAway.getText())));
                        prm.setDouble(8, Double.parseDouble(PUtility.ConvertReal(txtfmDelivery.getText())));
                        prm.setDouble(9, Double.parseDouble(PUtility.ConvertReal(txtfmPinto.getText())));
                        prm.setDouble(10, Double.parseDouble(PUtility.ConvertReal(txtfmWhole.getText())));
                        prm.setString(11, cvth.Unicode2ASCII(txtfPro1.getText()));
                        prm.setString(12, cvth.Unicode2ASCII(txtfPro2.getText()));
                        prm.setString(13, cvth.Unicode2ASCII(txtfPro3.getText()));

                        prm.executeUpdate();
                        chk = true;
                    } else {
                        stmt = (Statement) db.con.createStatement();
                        String sql = "Insert into blink (pdept,pcode,lastup,flage,bgroup,price1,price2,price3,price4,price5,promotion1,promotion2,promotion3) values(?,?,?,?,?,?,?,?,?,?,?,?,?)";
                        PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);

                        String[] pdept = getpdepand();

                        prm.setString(1, pdept[0]);
                        prm.setString(2, txtfPcode.getText());
                        prm.setString(3, dateFmtSave.format(new java.util.Date()));
                        prm.setString(4, "Y");
                        prm.setString(5, txtfBgroup1.getText());
                        prm.setDouble(6, Double.parseDouble(PUtility.ConvertReal(txtfmEatIn.getText())));
                        prm.setDouble(7, Double.parseDouble(PUtility.ConvertReal(txtfmTakeAway.getText())));
                        prm.setDouble(8, Double.parseDouble(PUtility.ConvertReal(txtfmDelivery.getText())));
                        prm.setDouble(9, Double.parseDouble(PUtility.ConvertReal(txtfmPinto.getText())));
                        prm.setDouble(10, Double.parseDouble(PUtility.ConvertReal(txtfmWhole.getText())));
                        prm.setString(11, txtfPro1.getText());
                        prm.setString(12, txtfPro2.getText());
                        prm.setString(13, txtfPro3.getText());


                        prm.executeUpdate();
                        chk = true;
                    }
                    stmt.close();
                    clearplutxt();

                } catch (Exception e) {
                    JOptionPane.showMessageDialog(this, e.getMessage(), "Insert Error", JOptionPane.ERROR_MESSAGE);
                }
            }

            showdataIntbl(txtfBgroup1.getText());


        }
        return chk;
    }

    private boolean validateSave() {
        boolean chk = true;

        if (!chkbgroup(txtfBgroup1.getText())) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสาขาไม่ถูกต้อง... ");
            chk = false;
            txtfBgroup1.requestFocus();
        } else if (txtfBgroup1.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสาขาไม่ถูกต้อง... ");
            chk = false;
            txtfBgroup1.requestFocus();
        } else if (txtfBgroup1.getText().length() > 3) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสาขาไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 3 ตัวอักษร)");
            chk = false;
            txtfBgroup1.requestFocus();
        } else if (txtfPcode.getText().trim().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าให้ถูกต้อง");
            chk = false;
            txtfPcode.requestFocus();
        } else if (txtfPcode.getText().length() > 13) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 13 ตัวอักษร)");
            chk = false;
            txtfPcode.requestFocus();
        } else if (txtfPro1.getText().length() > 3) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 3 ตัวอักษร)");
            chk = false;
            txtfPro1.requestFocus();
        } else if (txtfPro2.getText().length() > 3) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 3 ตัวอักษร)");
            chk = false;
            txtfPro2.requestFocus();
        } else if (txtfPro3.getText().length() > 3) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสโปรโมชั่นไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 3 ตัวอักษร)");
            chk = false;
            txtfPro3.requestFocus();
        } else if (txtfBgroup1.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสาขาไม่ถูกต้อง... ");
            chk = false;
            txtfBgroup1.requestFocus();
        } else if (txtfBgroup1.getText().length() > 3) {
            JOptionPane.showMessageDialog(this, "กำหนดรหัสสาขาไม่ถูกต้อง... (ต้องมีขนาดไม่เกิน 3 ตัวอักษร)");
            chk = false;
            txtfBgroup1.requestFocus();
        } else if (txtfmEatIn.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดข้อมูลไม่ถูกต้อง... ");
            chk = false;
            txtfmEatIn.requestFocus();
        } else if (txtfmDelivery.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดข้อมูลไม่ถูกต้อง... ");
            chk = false;
            txtfmDelivery.requestFocus();
        } else if (txtfmPinto.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดข้อมูลไม่ถูกต้อง... ");
            chk = false;
            txtfmPinto.requestFocus();
        } else if (txtfmTakeAway.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดข้อมูลไม่ถูกต้อง... ");
            chk = false;
            txtfmTakeAway.requestFocus();
        } else if (txtfmWhole.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดข้อมูลไม่ถูกต้อง... ");
            chk = false;
            txtfmWhole.requestFocus();
        }


        Double eatin = Double.parseDouble(PUtility.ConvertReal(txtfmEatIn.getText()));
        Double delivery = Double.parseDouble(PUtility.ConvertReal(txtfmDelivery.getText()));
        Double pinto = Double.parseDouble(PUtility.ConvertReal(txtfmPinto.getText()));
        Double take = Double.parseDouble(PUtility.ConvertReal(txtfmTakeAway.getText()));
        Double whole = Double.parseDouble(PUtility.ConvertReal(txtfmWhole.getText()));
        if (eatin < 0 || eatin > 99999999.99) {
            JOptionPane.showMessageDialog(this, "ระบบไม่สามารถจัดเก็บได้ จำนวนเงินต้องไม่น้อยกว่า 0.00 และมากเกิน 99,999,999.99 ล้านบาท");
            chk = false;
            txtfmEatIn.requestFocus();
        } else if (delivery < 0 || delivery > 99999999.99) {
            JOptionPane.showMessageDialog(this, "ระบบไม่สามารถจัดเก็บได้ จำนวนเงินต้องไม่น้อยกว่า 0.00 และมากเกิน 99,999,999.99 ล้านบาท");
            chk = false;
            txtfmDelivery.requestFocus();
        } else if (pinto < 0 || pinto > 99999999.99) {
            JOptionPane.showMessageDialog(this, "ระบบไม่สามารถจัดเก็บได้ จำนวนเงินต้องไม่น้อยกว่า 0.00 และมากเกิน 99,999,999.99 ล้านบาท");
            chk = false;
            txtfmPinto.requestFocus();
        } else if (take < 0 || take > 99999999.99) {
            JOptionPane.showMessageDialog(this, "ระบบไม่สามารถจัดเก็บได้ จำนวนเงินต้องไม่น้อยกว่า 0.00 และมากเกิน 99,999,999.99 ล้านบาท");
            chk = false;
            txtfmTakeAway.requestFocus();
        } else if (whole < 0 || whole > 99999999.99) {
            JOptionPane.showMessageDialog(this, "ระบบไม่สามารถจัดเก็บได้ จำนวนเงินต้องไม่น้อยกว่า 0.00 และมากเกิน 99,999,999.99 ล้านบาท");
            chk = false;
            txtfmWhole.requestFocus();
        }

        return chk;
    }

    public String[] getpdepand() {
        String[] aa = null;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from product  where pcode ='" + cvth.Unicode2ASCII(txtfPcode.getText()) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    aa = new String[]{cvth.ASCII2Unicode(rs.getString("pgroup"))
                    };

                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าไม่ถูกต้อง");
                    txtfPcode.requestFocus();
                    clearplutxt();

                }



            } else {
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from product  where pcode ='" + txtfPcode.getText() + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    aa = new String[]{rs.getString("pgroup")
                    };

                } else {
                    JOptionPane.showMessageDialog(this, "กำหนดรหัสสินค้าไม่ถูกต้อง");
                    txtfPcode.requestFocus();
                    clearplutxt();

                }


            }
        } catch (Exception e) {
        }
        return aa;
    }

    private void delete() {
        if (indexplutbl != -1 && !txtfBgroup1.getText().equals("")) {
            if (chkbgroup(txtfBgroup1.getText())) {

                int confirm = JOptionPane.showConfirmDialog(this, "คุณต้องการลบข้อมูลรายการที่เลือกหรือไม่...?", "Confirm", JOptionPane.YES_NO_OPTION);
                if (confirm == JOptionPane.YES_OPTION) {
                    try {
                        if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from blink where bgroup = ? and pcode = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, cvth.Unicode2ASCII(txtfBgroup1.getText()));
                            prm.setString(2, cvth.Unicode2ASCII(tblPLU.getValueAt(indexplutbl, 1).toString()));

                            prm.executeUpdate();
                        } else {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from blink where bgroup = ? and pcode = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, txtfBgroup1.getText());
                            prm.setString(2, tblPLU.getValueAt(indexplutbl, 1).toString());

                            prm.executeUpdate();

                        }
                        stmt.close();
                        clearplutxt();
                        indexplutbl = -1;

                    } catch (Exception e) {
                        JOptionPane.showMessageDialog(this, e.getMessage(), "Delete Error", JOptionPane.ERROR_MESSAGE);
                    }
                } else {
                    indexplutbl = -1;
                }
            }
            showdataIntbl(txtfBgroup1.getText());
        }


    }

    

    private void deletecouall() {
        if (!txtfBgroup1.getText().equals("")) {
            if (chkbgroup(txtfBgroup1.getText())) {

                int confirm = JOptionPane.showConfirmDialog(this, "คุณต้องการลบข้อมูลรายการทั้งหมดหรือไม่...?", "Confirm", JOptionPane.YES_NO_OPTION);
                if (confirm == JOptionPane.YES_OPTION) {
                    try {
                        if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from culink where bgroup = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, cvth.Unicode2ASCII(txtfBgroup1.getText()));


                            prm.executeUpdate();
                        } else {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from culink where bgroup = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, txtfBgroup1.getText());


                            prm.executeUpdate();

                        }
                        stmt.close();
                        clearplutxt();
                        indexcoupontbl = -1;

                    } catch (Exception e) {
                        JOptionPane.showMessageDialog(this, e.getMessage(), "Delete Error", JOptionPane.ERROR_MESSAGE);
                    }
                } else {
                    indexcoupontbl = -1;
                }
            }
        }
    }

    private void deleteall() {
        if (!txtfBgroup1.getText().equals("") && tblPLU.getRowCount() != 0) {
            if (chkbgroup(txtfBgroup1.getText())) {

                int confirm = JOptionPane.showConfirmDialog(this, "คุณต้องการลบข้อมูลรายการทั้งหมดหรือไม่...?", "Confirm", JOptionPane.YES_NO_OPTION);
                if (confirm == JOptionPane.YES_OPTION) {
                    try {
                        if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from blink where bgroup = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, cvth.Unicode2ASCII(txtfBgroup1.getText()));


                            prm.executeUpdate();
                        } else {
                            stmt = (Statement) db.con.createStatement();
                            String sql = "delete from blink where bgroup = ?";
                            PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                            prm.setString(1, txtfBgroup1.getText());


                            prm.executeUpdate();

                        }
                        stmt.close();
                        clearplutxt();
                        indexplutbl = -1;

                    } catch (Exception e) {
                        JOptionPane.showMessageDialog(this, e.getMessage(), "Delete Error", JOptionPane.ERROR_MESSAGE);
                    }
                } else {
                    indexplutbl = -1;
                }
            }
        }

        showdataIntbl(txtfBgroup1.getText());
    }

    private void deletePLU(String branchgroup) {


        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "delete from blink where bgroup = ?";
                PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                prm.setString(1, cvth.Unicode2ASCII(branchgroup));
                prm.executeUpdate();
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "delete from blink where bgroup = ?";
                PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                prm.setString(1, branchgroup);


                prm.executeUpdate();

            }
            stmt.close();


        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage(), "Delete Error", JOptionPane.ERROR_MESSAGE);
        }

    }

    private void deleteCoupon(String branchgroup) {


        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "delete from culink where bgroup = ?";
                PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                prm.setString(1, cvth.Unicode2ASCII(branchgroup));
                prm.executeUpdate();
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "delete from culink where bgroup = ?";
                PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql);
                prm.setString(1, branchgroup);
                prm.executeUpdate();

            }
            stmt.close();


        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage(), "Delete Error", JOptionPane.ERROR_MESSAGE);
        }

    }

    public String getCouponName(String code) {
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from cupon where cucode ='" + cvth.Unicode2ASCII(code) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    return cvth.ASCII2Unicode(rs.getString("cuname"));
                } else {
                    return "Null";
                }
            } else {
                stmt = (Statement) db.con.createStatement();
                String sql = "select * from cupon where cucode ='" + code + "";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    return rs.getString("cuname");

                } else {
                    return "Null";
                }

            }
        } catch (Exception e) {
        }
        return "Null";
    }
    public boolean vaildCopy() {
        boolean chk = true;
        if (txtfBgroup2.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง กรุณากำหนดกลุ่มสาขาให้ถูกต้อง");
            txtfBgroup2.requestFocus();
            chk = false;
        } else if (txtfBgroup3.getText().equals("")) {
            JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง กรุณากำหนดกลุ่มสาขาให้ถูกต้อง");
            txtfBgroup3.requestFocus();
            chk = false;
        } else if (!chkbgroup(txtfBgroup2.getText())) {
            JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง กรุณากำหนดกลุ่มสาขาให้ถูกต้อง");
            txtfBgroup2.requestFocus();
            chk = false;
        } else if (!chkbgroup(txtfBgroup3.getText())) {
            JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง กรุณากำหนดกลุ่มสาขาให้ถูกต้อง");
            txtfBgroup3.requestFocus();
            chk = false;
        } else if (txtfBgroup2.getText().equalsIgnoreCase(txtfBgroup3.getText())) {
            JOptionPane.showMessageDialog(this, "กำหนดกลุ่มสาขาไม่ถูกต้อง ไม่สามารถ Copy ข้อมูลกลุ่มสาขาเดียวกันได้");
            txtfBgroup2.requestFocus();
            chk = false;
        }

        return chk;
    }

    public void copyProcress() {
        if (vaildCopy()) {
            int confirm = JOptionPane.showConfirmDialog(this, "คุณต้องการ Copy ข้อมูลจากกลุ่ม " + txtfBgroup2.getText() + " ไปยังกลุ่ม " + txtfBgroup3.getText() + " หรือไม่...?", "Confirm", JOptionPane.YES_NO_OPTION);
            if (confirm == JOptionPane.YES_OPTION) {
                if (chkrow()) {
                    int confirm2 = JOptionPane.showConfirmDialog(this, "กลุ่มสาขา " + txtfBgroup3.getText() + " มีข้อมูลอยู่แล้ว กรุณายืนยันอีกครั้ง...?", "Confirm", JOptionPane.YES_NO_OPTION);
                    if (confirm2 == JOptionPane.YES_OPTION) {
                        deletePLU(txtfBgroup3.getText());
                        copyPLU();
                        JOptionPane.showMessageDialog(this, "การ Copy ข้อมูลเสร็จเรียบร้อย...");
                        txtfBgroup2.setText("");
                        txtfBgroup3.setText("");
                    }

                } else {
                    deletePLU(txtfBgroup3.getText());
                    copyPLU();
                    JOptionPane.showMessageDialog(this, "การ Copy ข้อมูลเสร็จเรียบร้อย...");
                    txtfBgroup2.setText("");
                    txtfBgroup3.setText("");
                }
            }
        }

    }

    public boolean chkrow() {
        boolean chk = false;
        ResultSet rs = null;
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from blink where bgroup ='" + cvth.Unicode2ASCII(txtfBgroup3.getText()) + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                } else {
                    try {
                        ResultSet rs2 = null;
                        Statement stmt2 = (Statement) db.con.createStatement();
                        String sql2 = "select * from culink where bgroup ='" + cvth.Unicode2ASCII(txtfBgroup3.getText()) + "'";
                        rs2 = stmt2.executeQuery(sql2);
                        if (rs2.next()) {
                            chk = true;
                        }
                    } catch (Exception e) {
                        JOptionPane.showMessageDialog(this, e);
                    }
                }


            } else {
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from blink where bgroup ='" + txtfBgroup3.getText() + "'";
                rs = stmt.executeQuery(sql);
                if (rs.next()) {
                    chk = true;
                } else {
                    try {
                        ResultSet rs2 = null;
                        Statement stmt2 = (Statement) db.con.createStatement();
                        String sql2 = "select * from culink where bgroup ='" + txtfBgroup3.getText() + "'";
                        rs2 = stmt2.executeQuery(sql2);
                        if (rs2.next()) {
                            chk = true;
                        }
                    } catch (Exception e) {
                        JOptionPane.showMessageDialog(this, e);
                    }
                }

            }
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e);
        }

        return chk;
    }

    private void copyPLU() {
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                ResultSet rs = null;
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from blink where bgroup ='" + txtfBgroup2.getText() + "'";
                rs = stmt.executeQuery(sql);
                while (rs.next()) {
                    Statement stmt2 = (Statement) db.con.createStatement();
                    String sql2 = "Insert into blink (pdept,pcode,lastup,flage,bgroup,price1,price2,price3,price4,price5,promotion1,promotion2,promotion3) values(?,?,?,?,?,?,?,?,?,?,?,?,?)";
                    PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql2);

                    prm.setString(1, rs.getString("pdept"));
                    prm.setString(2, rs.getString("pcode"));
                    prm.setString(3, cvth.Unicode2ASCII(dateFmtSave.format(new java.util.Date())));
                    prm.setString(4, rs.getString("flage"));
                    prm.setString(5, cvth.Unicode2ASCII(txtfBgroup3.getText()));
                    prm.setString(6, rs.getString("price1"));
                    prm.setString(7, rs.getString("price2"));
                    prm.setString(8, rs.getString("price3"));
                    prm.setString(9, rs.getString("price4"));
                    prm.setString(10, rs.getString("price5"));
                    prm.setString(11, rs.getString("promotion1"));
                    prm.setString(12, rs.getString("promotion2"));
                    prm.setString(13, rs.getString("promotion3"));

                    prm.executeUpdate();
                }

            } else {
            }
            stmt.close();
            clearplutxt();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage(), "Insert Error", JOptionPane.ERROR_MESSAGE);
        }

    }

    private void copyCoupon() {
        try {
            if (!db.Char_Set.equalsIgnoreCase("utf-8")) {
                ResultSet rs = null;
                stmt = (Statement) db.con.createStatement();

                String sql = "select * from culink where bgroup ='" + txtfBgroup2.getText() + "'";
                rs = stmt.executeQuery(sql);
                while (rs.next()) {
                    Statement stmt2 = (Statement) db.con.createStatement();
                    String sql2 = "Insert into culink (cucode,bgroup,fixbranch) values(?,?,?)";
                    PreparedStatement prm = (PreparedStatement) db.con.prepareStatement(sql2);

                    prm.setString(1, rs.getString("cucode"));
                    prm.setString(2, cvth.Unicode2ASCII(txtfBgroup3.getText()));
                    prm.setString(3, rs.getString("fixbranch"));
                    prm.executeUpdate();


                }

            } else {
            }
            stmt.close();
            clearplutxt();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage(), "Insert Error", JOptionPane.ERROR_MESSAGE);
        }

    }

    public void btnSearchProduct() {
        ListProduct f = new ListProduct(new NimbusFrame(), true);
        f.setVisible(true);
        if (!f.code.equals("")) {
            txtfPcode.setText(f.code);
        }

    }
}
